{
  "Generate OpenSpec from Request": {
    "prefix": "metaspec",
    "scope": "markdown,plaintext",
    "body": [
      "---",
      "Role: Tu es un assistant expert en ingénierie logicielle spécialisé dans la rédaction de spécifications techniques au format OpenSpec.",
      "Task: À partir de la demande utilisateur (section INPUT) et du CONTEXTE fourni, génère trois fichiers distincts et bien formatés :",
      "- `purpose.md` (contexte, objectif mesurable, périmètre)",
      "- `task.md` (tâches découpées, critères d'acceptation, plan de travail)",
      "- `spec.md` (spécification technique détaillée, API, schémas, validations)",
      "",
      "Rules:",
      "- FOURNIS CHAQUE FICHIER entre des délimiteurs clairs EXEMPLE :",
      "  --- BEGIN: purpose.md ---",
      "  (contenu markdown de purpose.md)",
      "  --- END: purpose.md ---",
      "  --- BEGIN: task.md ---",
      "  ...",
      "  --- END: task.md ---",
      "  --- BEGIN: spec.md ---",
      "  ...",
      "  --- END: spec.md ---",
      "- Pour chaque fichier, commence par un frontmatter YAML minimal (title, owner, version, created_by).",
      "- Fournis aussi un bloc JSON final `---metadata---` contenant {files:[\"purpose.md\",\"task.md\",\"spec.md\"], version: \"1.0\"}.",
      "- Le contenu doit être technique, précis, sans paraphrases inutiles, directement exécutable par un agent automatisé.",
      "",
      "## 1. Demande Utilisateur (Input)",
      "${1:Décrivez votre idée ici en une ou deux phrases...}",
      "",
      "## 2. Contexte (Fichiers pertinents du projet)",
      "```",
      "${TM_SELECTED_TEXT}",
      "```",
      "",
      "## 3. Contraintes / Exigences particulières",
      "${2:Indiquez contraintes (compatibilité, langage, délai, etc.)}",
      "",
      "## 4. Génération attendue (Output)",
      "Génère les trois fichiers séparés par les délimiteurs ci-dessus. Chaque fichier doit être terminé par un bloc '## Acceptance' listant les critères d'acceptation mesurables.",
      "",
      "--- BEGIN: purpose.md ---",
      "title: ${3:Short title}",
      "owner: ${4:team or role}",
      "version: 1.0",
      "",
      "# Purpose",
      "- Objectif :",
      "- Contexte :",
      "- Mesures de succès :",
      "--- END: purpose.md ---",
      "",
      "--- BEGIN: task.md ---",
      "title: ${5:Tasks outline}",
      "owner: ${4:team or role}",
      "version: 1.0",
      "",
      "# Tasks",
      "1. ... (décrire)",
      "",
      "## Acceptance criteria",
      "- Criterion 1",
      "- Criterion 2",
      "--- END: task.md ---",
      "",
      "--- BEGIN: spec.md ---",
      "title: ${6:Spec title}",
      "owner: ${4:team or role}",
      "version: 1.0",
      "",
      "# Specification",
      "- Archi / composants :",
      "- API / contrats :",
      "- Données : schémas, exemples",
      "- Sécurité / performance :",
      "",
      "## Acceptance tests",
      "- ...",
      "--- END: spec.md ---",
      "",
      "---metadata---",
      "{\"files\":[\"purpose.md\",\"task.md\",\"spec.md\"],\"version\":\"1.0\"}",
      ""
    ],
    "description": "Crée un prompt strict pour demander à un LLM de générer une OpenSpec complète (purpose/task/spec) avec délimiteurs machine-parseable."
  }
}
